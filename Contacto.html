<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Contáctanos para consultas, pedidos o información sobre nuestros jabones artesanales y velas aromáticas.">
  <meta name="keywords" content="contacto, consultas, pedidos, información, formulario contacto">
  <meta property="og:title" content="Contacto - Tajmeel Stefany" />
  <meta property="og:description" content="Envíanos un mensaje y te responderemos pronto." />
  <title>Contacto | Tajmeel Stefany</title>
  <link rel="icon" type="image/x-icon" href="assets/favicon.ico"/>
  
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  <!-- Estilos base del sitio -->
  <link rel="stylesheet" href="css/styles.css">
  <!-- Estilos específicos de contacto -->
  <link rel="stylesheet" href="css/contacto.css">
</head>
<body>
  <main class="contact-wrap">
    <div class="contact-logo">
      <img src="assets/img/isologo.png" alt="Jabones Naturales" />
    </div>
    
    <a href="about.html" class="btn btn-link mb-3">&larr; Volver</a>

    <div class="card p-4 mt-3">
      <h1 class="h3 mb-3">Contáctanos</h1>

      <!-- Mensaje de éxito (se muestra con JavaScript) -->
      <div id="successMessage" class="alert alert-success d-none" role="alert">
        <i class="bi bi-check-circle-fill me-2"></i>
        ¡Gracias! Tu mensaje fue enviado correctamente. Te contactaremos pronto.
      </div>

      <!-- Mensaje de error (se muestra con JavaScript) -->
      <div id="errorMessage" class="alert alert-danger d-none" role="alert">
        <i class="bi bi-exclamation-triangle-fill me-2"></i>
        <span id="errorText"></span>
      </div>

      <!-- 
        NETLIFY FORMS: 
        - Agregar atributo: data-netlify="true"
        - Agregar campo oculto: name="form-name"
        - El action puede estar vacío o apuntar a una página de éxito
      -->
      <form 
        name="contacto" 
        method="POST" 
        data-netlify="true"
        netlify-honeypot="bot-field"
        action="/gracias.html"
        onsubmit="return validateForm()">
        
        <!-- Campo oculto requerido por Netlify -->
        <input type="hidden" name="form-name" value="contacto">
        
        <!-- Honeypot anti-spam (campo oculto) -->
        <p class="d-none">
          <label>No llenes esto si eres humano: <input name="bot-field" /></label>
        </p>

        <div class="mb-3">
          <label for="nombre" class="form-label">Nombre <span class="text-danger">*</span></label>
          <input 
            type="text" 
            class="form-control" 
            id="nombre" 
            name="nombre" 
            required>
        </div>

        <div class="mb-3">
          <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
          <input 
            type="email" 
            class="form-control" 
            id="email" 
            name="email" 
            required>
        </div>

        <div class="mb-3">
          <label for="telefono" class="form-label">Teléfono</label>
          <input 
            type="tel" 
            class="form-control" 
            id="telefono" 
            name="telefono"
            pattern="[0-9+\-\s()]*"
            placeholder="+593 99 999 9999">
        </div>

        <div class="mb-3">
          <label for="mensaje" class="form-label">Mensaje <span class="text-danger">*</span></label>
          <textarea 
            class="form-control" 
            id="mensaje" 
            name="mensaje" 
            rows="5" 
            required></textarea>
        </div>

        <div class="d-grid gap-2 d-md-flex justify-content-md-between">
          <button type="submit" class="btn btn-primary">
            <i class="bi bi-send-fill me-2"></i>Enviar Mensaje
          </button>
          <button type="reset" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-counterclockwise me-2"></i>Limpiar
          </button>
        </div>
      </form>
    </div>
  </main>

  <!-- Bootstrap JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- Script de validación -->
  <script>
    function validateForm() {
      const nombre = document.getElementById('nombre').value.trim();
      const email = document.getElementById('email').value.trim();
      const mensaje = document.getElementById('mensaje').value.trim();
      const errorMsg = document.getElementById('errorMessage');
      const errorText = document.getElementById('errorText');

      // Ocultar mensajes previos
      errorMsg.classList.add('d-none');

      // Validar campos vacíos
      if (!nombre || !email || !mensaje) {
        errorText.textContent = 'Por favor completa todos los campos requeridos.';
        errorMsg.classList.remove('d-none');
        return false;
      }

      // Validar formato de email
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        errorText.textContent = 'Por favor ingresa un email válido.';
        errorMsg.classList.remove('d-none');
        return false;
      }

      return true; // Permitir envío
    }

    // Detectar si viene de envío exitoso (parámetro en URL)
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('success') === 'true') {
      document.getElementById('successMessage').classList.remove('d-none');
      // Limpiar el formulario
      document.querySelector('form').reset();
      // Scroll al mensaje de éxito
      document.getElementById('successMessage').scrollIntoView({ behavior: 'smooth' });
    }
  </script>
</body>
</html>
